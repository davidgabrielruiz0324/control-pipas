<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Registro de suministro</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    label { display:block; margin-top:10px; }
    button { margin-top:15px; padding:10px; }
  </style>
</head>
<body>

<h2>Registro de suministro</h2>

<p><b>ID cliente:</b> <span id="idCliente"></span></p>
<p><b>Nombre:</b> <span id="nombreCliente">---</span></p>

<label>Estatus:
  <select id="estatus">
    <option value="ENTREGADO">ENTREGADO</option>
    <option value="NO SE SURTIÓ">NO SE SURTIÓ</option>
  </select>
</label>

<label>Litros:
  <input type="number" id="litros" value="0">
</label>

<label>Operador:
  <input type="text" id="operador">
</label>

<label># Pipa:
  <input type="text" id="pipa">
</label>

<button onclick="guardar()">GUARDAR</button>

<script>
const params = new URLSearchParams(window.location.search);
const id = params.get("id");

document.getElementById("idCliente").innerText = id;

fetch("https://script.google.com/macros/s/AKfycbw1P0sEyaFqO5BuqUQESTw7sh63uxN31lqBh2q4C3hFPjCK1ldVuH9cs_gs8qPNjVqIkQ/exec?accion=cliente&id=" + id)
  .then(res => res.json())
  .then(data => {
    if (data.nombre) {
      document.getElementById("nombreCliente").innerText = data.nombre;
    }
  });

function guardar() {
  const datos = {
    id: id,
    nombre: document.getElementById("nombreCliente").innerText,
    estatus: document.getElementById("estatus").value,
    litros: document.getElementById("litros").value,
    operador: document.getElementById("operador").value,
    pipa: document.getElementById("pipa").value
  };

  fetch("https://script.google.com/macros/s/AKfycbw1P0sEyaFqO5BuqUQESTw7sh63uxN31lqBh2q4C3hFPjCK1ldVuH9cs_gs8qPNjVqIkQ/exec", {
    method: "POST",
    body: JSON.stringify(datos)
  })
  .then(() => alert("Registro guardado"));
}
</script>

</body>
</html>
